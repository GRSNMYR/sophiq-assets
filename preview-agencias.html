<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Preview Emails Agencias - Sophiq Properties</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }

        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 61px;
            background: #fff;
            border-bottom: 1px solid #e5e5e5;
            display: flex;
            align-items: center;
            padding: 0 20px;
            gap: 20px;
            z-index: 1000;
        }

        .logo { height: 28px; }

        .controls { display: flex; gap: 12px; align-items: center; flex: 1; }

        select {
            padding: 8px 12px;
            font-size: 13px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: #fff;
            cursor: pointer;
            min-width: 180px;
        }

        select:focus { outline: none; border-color: #c19932; }

        .stats {
            font-size: 12px;
            color: #666;
            display: flex;
            gap: 16px;
        }

        .stats strong { color: #1a191e; }

        .tier-label {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            background: #f0f0f0;
            color: #333;
        }

        iframe {
            position: fixed;
            top: 61px;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            height: calc(100vh - 61px);
            border: none;
        }

        .placeholder {
            position: fixed;
            top: 61px;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f5f5f5;
            color: #666;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <img src="logos/sophiq-logo-dark.png"
             alt="Sophiq" class="logo">

        <div class="controls">
            <select id="tierSelect" onchange="onTierChange()">
                <option value="">-- Selecciona Tier --</option>
                <option value="Tier 1">Tier 1 (15 props)</option>
                <option value="Tier 2">Tier 2 (12 props)</option>
                <option value="Tier 3">Tier 3 (12 props)</option>
            </select>

            <select id="contactSelect" onchange="loadEmail()" disabled>
                <option value="">-- Selecciona Contacto --</option>
            </select>
        </div>

        <div class="stats">
            <span><strong>653</strong> contactos</span>
            <span><strong>17</strong> propiedades</span>
            <span>Semana <strong>03/2026</strong></span>
        </div>
    </nav>

    <div class="placeholder" id="placeholder">
        Selecciona un tier y contacto para ver el preview del email
    </div>

    <iframe id="email-frame" style="display:none;"></iframe>

    <script>
        const contactosPorTier = {
            "Tier 1": [
                {nombre: "Sergio", agencia: "DIZA Consultores", archivo: "sergiolopezbravo_at_dizaconsultores_com.html", props: 15},
                {nombre: "José Luis", agencia: "Engel & Völkers", archivo: "joseluis_diazdeneira_at_engelvoelkers_com.html", props: 15},
                {nombre: "Esther", agencia: "Engel & Völkers", archivo: "esther_jimenez_at_engelvoelkers_com.html", props: 15},
                {nombre: "Cristina", agencia: "Engel & Völkers", archivo: "cristina_rodriguez_at_engelvoelkers_com.html", props: 15},
                {nombre: "Paloma", agencia: "Engel & Völkers", archivo: "paloma_castanon_at_engelvoelkers_com.html", props: 15}
            ],
            "Tier 2": [
                {nombre: "Barbara", agencia: "20 punto 20 Realty", archivo: "Barbaraperezverdier_at_gmail_com.html", props: 12},
                {nombre: "Blanca", agencia: "A.P. de Propiedades", archivo: "apdepropiedades_at_gmail_com.html", props: 12},
                {nombre: "Paula", agencia: "ACR Real Estate", archivo: "p_albamonte_at_acrrealestate_es.html", props: 12},
                {nombre: "Pedro", agencia: "BELMAY", archivo: "info_at_belmay_es.html", props: 12},
                {nombre: "Isabel", agencia: "Belton Real Estate", archivo: "isabel_at_belton_es.html", props: 12}
            ],
            "Tier 3": [
                {nombre: "Paola Teresa", agencia: "A&E Inmobiliare", archivo: "paola_at_aeinmobiliere_com.html", props: 12},
                {nombre: "Priscila", agencia: "A4L REAL ESTATE", archivo: "A4LAGENCIA_at_GMAIL_COM.html", props: 12},
                {nombre: "Luciana", agencia: "ABITARE PLUS", archivo: "luci_at_abitareconnection_com.html", props: 12},
                {nombre: "Joaquin", agencia: "ALFA REINA", archivo: "info_at_alfareina_com.html", props: 12},
                {nombre: "Carolina", agencia: "Abra Homes", archivo: "carolinaartola_at_abrahomes_com.html", props: 12}
            ]
        };

        const tierSelect = document.getElementById('tierSelect');
        const contactSelect = document.getElementById('contactSelect');
        const emailFrame = document.getElementById('email-frame');
        const placeholder = document.getElementById('placeholder');

        function onTierChange() {
            const tier = tierSelect.value;
            contactSelect.innerHTML = '<option value="">-- Selecciona Contacto --</option>';

            if (tier && contactosPorTier[tier]) {
                contactSelect.disabled = false;
                contactosPorTier[tier].forEach(c => {
                    const opt = document.createElement('option');
                    opt.value = c.archivo;
                    opt.textContent = `${c.nombre} - ${c.agencia} (${c.props} props)`;
                    contactSelect.appendChild(opt);
                });
            } else {
                contactSelect.disabled = true;
            }

            emailFrame.style.display = 'none';
            placeholder.style.display = 'flex';
        }

        function loadEmail() {
            const archivo = contactSelect.value;
            if (archivo) {
                emailFrame.src = 'emails-agencias-2026-W03/' + archivo;
                emailFrame.style.display = 'block';
                placeholder.style.display = 'none';

                const tier = tierSelect.value;
                history.replaceState(null, '', '?tier=' + encodeURIComponent(tier) + '&email=' + encodeURIComponent(archivo));
            }
        }

        // Cargar desde URL params
        window.onload = function() {
            const params = new URLSearchParams(window.location.search);
            const tier = params.get('tier');
            const email = params.get('email');

            if (tier && email) {
                tierSelect.value = tier;
                onTierChange();
                contactSelect.value = email;
                loadEmail();
            }
        };
    </script>
</body>
</html>
